# Maintainer: Alexander Grothe <seahawk1986[at]hotmail[dot]com>
pkgname=vdr-rotorng
pkgver=0.3.1
_vdrapi=1.7.41
pkgrel=1
pkgdesc="control rotors"
url=""
arch=('x86_64' 'i686')
license=('GPL2')
depends=("vdr-api=${_vdrapi}")
_plugname=$(echo $pkgname | sed 's/vdr-//g')
replaces=("vdr-plugin-$_plugname")
conflicts=("vdr-plugin-$_plugname")
source=("https://launchpad.net/~yavdr/+archive/unstable-vdr/+files/vdr-plugin-rotorng_0.3.1.orig.tar.gz" "review.diff" "dependencies" "fix-makefile.diff")
md5sums=('7272c243c92995c521b8ca6712f42115'
         'b3e87eb006133f925ffc11d31c022894'
         '51ce8990df78786881b08872ea80de81')

package() {
  cd "${srcdir}/${_plugname}-${pkgver}"
  cp $srcdir/dependencies .dependencies
  patch -p1 -i $srcdir/review.diff
  patch -p1 -i $srcdir/fix-makefile.diff
  mkdir -p $pkgdir/usr/lib/vdr/plugins
  make CFLAGS="$(pkg-config vdr --variable=cflags)" \
       CXXFLAGS="$(pkg-config vdr --variable=cxxflags)" \
       VDRDIR="/usr/include/vdr" \
       DVBDIR="/usr/include/" \
       LIBDIR="$pkgdir/$(pkg-config vdr --variable=libdir)" \
       LOCALEDIR="$pkgdir/$(pkg-config vdr --variable=locdir)" \
       all
}
